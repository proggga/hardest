[tox]
skipsdist = True
envlist = test
[testenv]
setenv=PYTHONDONTWRITEBYTECODE='yes'
deps= -r{toxinidir}/requirements.txt
before= rm -rfv .cache
commands=
    test: coverage run -m pytest --flake8 --pylint --pylint-rcfile=.pylintrc
    test: coverage report --fail-under=99
    test: xenon -b A -a A -m A .
    test: pytest --mccabe -m mccabe
    metrics:    xenon -b A -a A -m A .
    metrics:    pytest --mccabe -m mccabe
    lint:     pytest -p no:cacheprovider --flake8 -m flake8
    lint:     pytest -p no:cacheprovider --pylint -m pylint --pylint-rcfile=.pylintrc
    coverage: coverage run -m pytest -p no:cacheprovider
    coverage: coverage report --fail-under=99

[pytest]
mccabe-complexity=7
